var units={si:{wind:"m/s",temp:"&deg;C",windMultiplier:1,tempMultiplier:1},us:{wind:"mph",temp:"&deg;f",windMultiplier:2.2,tempMultiplier:1.8},uk:{wind:"mph",temp:"&deg;C",windMultiplier:2.2,tempMultiplier:1},ca:{wind:"kph",temp:"&deg;C",windMultiplier:3.6,tempMultiplier:1},auto:{wind:"m/s",temp:"&deg;C",windMultiplier:1,tempMultiplier:1}};function displayWeather(n){console.log(n);$("#weatherDisplay").html("");var q=64;var p=$('<div class="col-md-12 col-lg-6">');var r=$('<div class="col-md-12 col-lg-6">');var b=compareWind(n.today.averageWindSpeed,n.yesterday.averageWindSpeed);var k=compareTemperature(n.today.averageTemperature,n.yesterday.averageTemperature,n.today.units);var c=$('<div class="wind col-sm-6">').append("<h3>Wind</h3>").append('<h4 class="numeric">'+twoDP(n.today.averageWindSpeed)+" "+units[n.today.units]["wind"]+"</h4>").append('<h5 class="numeric">'+twoDP(n.today.precipProbability*100)+"% chance of rain</h5>").append("<p>"+b.text+" yesterday ("+addSign(twoDP(b.diff))+" "+units[n.today.units]["wind"]+")</p>");var o=$('<div class="temp col-sm-6">').append("<h3>Temperature</h3>").append('<h4 class="numeric">'+twoDP(n.today.averageTemperature)+" "+units[n.today.units]["temp"]+"</h4>").append('<h5 class="numeric">Low: '+twoDP(n.today.temperatureMin)+" "+units[n.today.units]["temp"]+" High: "+twoDP(n.today.temperatureMax)+" "+units[n.today.units]["temp"]+"</h5>").append("<p>"+k.text+" yesterday ("+addSign(twoDP(k.diff))+" "+units[n.today.units]["temp"]+")</p>");var j=$('<div class="row today title">').append($('<div class="col-md-12"><h2><a href="today.php" alt="Today\'s Weather" title="Today\'s Weather">Today</a></h2></div>')).append('<canvas id="icon-today" width="'+q+'" height="'+q+'"></canvas>');var i=$('<div class="row today summary">').append($('<div class="col-md-12">').append($("<p>"+n.today.summary+"</p>")));var e=$('<div class="row today result">').append(c).append(o);if(Math.round(k.diff)>0){p.addClass("hotter")}else{if(Math.round(k.diff)<0){p.addClass("colder")}}b=compareWind(n.tomorrow.averageWindSpeed,n.today.averageWindSpeed);k=compareTemperature(n.tomorrow.averageTemperature,n.today.averageTemperature,n.tomorrow.units);var c=$('<div class="wind col-sm-6">').append("<h3>Wind</h3>").append('<h4 class="numeric">'+twoDP(n.tomorrow.averageWindSpeed)+" "+units[n.tomorrow.units]["wind"]+"</h4>").append('<h5 class="numeric">'+twoDP(n.tomorrow.precipProbability*100)+"% chance of rain</h5>").append("<p>"+b.text+" today ("+addSign(twoDP(b.diff))+" "+units[n.tomorrow.units]["wind"]+")</p>");var o=$('<div class="temp col-sm-6">').append("<h3>Temperature</h3>").append('<h4 class="numeric">'+twoDP(n.tomorrow.averageTemperature)+" "+units[n.tomorrow.units]["temp"]+"</h4>").append('<h5 class="numeric">Low: '+twoDP(n.tomorrow.temperatureMin)+" "+units[n.tomorrow.units]["temp"]+" High: "+twoDP(n.tomorrow.temperatureMax)+" "+units[n.tomorrow.units]["temp"]+"</h5>").append("<p>"+k.text+" today ("+addSign(twoDP(k.diff))+" "+units[n.tomorrow.units]["temp"]+")</p>");var d=$('<div class="row tomorrow title">').append($('<div class="col-md-12"><h2><a href="tomorrow.php" alt="Tomorrows Weather" title="Tomorrow\'s Weather">Tomorrow</a></h2></div>')).append('<canvas id="icon-tomorrow" width="'+q+'" height="'+q+'"></canvas>');var f=$('<div class="row tomorrow summary">').append($('<div class="col-md-12">').append($("<p>"+n.tomorrow.summary+"</p>")));var m=$('<div class="row tomorrow result">').append(c).append(o);p.append(j).append(i).append(e);r.append(d).append(f).append(m);$("#subheading").text("Relative Weather for "+userLocation.city);$("#weatherDisplay").append(p).append(r);if(Math.round(k.diff)>0){r.addClass("hotter")}else{if(Math.round(k.diff)<0){r.addClass("colder")}}var h=new Skycons({color:"white"});h.add("icon-today",Skycons[n.today.icon.toUpperCase().replace(/-/gi,"_")]);h.add("icon-tomorrow",Skycons[n.tomorrow.icon.toUpperCase().replace(/-/gi,"_")]);h.play();var a=new google.maps.LatLng(userLocation.latitude,userLocation.longitude);var t={center:a,zoom:11};var l=$(window).height()>600?300:200;$("#map-canvas").css("min-height",l);$("#map-canvas").html("");var s=new google.maps.Map(document.getElementById("map-canvas"),t);var g=new google.maps.Marker({position:a,map:s})}$("#postcodeForm").submit(function(a){getWeatherFromPostcode($("#postcode").val(),displayWeather);a.preventDefault()});function twoDP(a){return((Math.round(a*100))/100)}function addSign(a){addition="";if(a>0){addition="+"}else{if(a==0){addition="&plusmn;"}}return addition+a}var timer;var timer2;function highlight(a){clearTimeout(timer);if(a.hasClass("highlight")){a.removeClass("highlight");clearTimeout(timer2);timer2=setTimeout(function(){a.addClass("highlight");timer=setTimeout(function(){a.removeClass("highlight")},3000)},50)}else{a.addClass("highlight");timer=setTimeout(function(){a.removeClass("highlight")},3000)}}jQuery().ready(function(){getWeatherFromLocation(displayWeather)});var scrollingOn=false;var offsets={};$(window).scroll($.debounce(function(c){if(1==2&&$(document).width()<768){offsets.todaytitle=$(".row.today.title").offset();offsets.todaywind=$(".row.today.result .wind").offset();offsets.todaytemp=$(".row.today.result .temp").offset();offsets.tomorrowtitle=$(".row.tomorrow.title").offset();offsets.tomorrowwind=$(".row.tomorrow.result .wind").offset();offsets.tomorrowtemp=$(".row.tomorrow.result .temp").offset();offsets.form=$("#postcodeForm").offset();offsets.nav=$("#nav-bottom").offset();offsets.desct=$("#desct").offset();offsets.desc1=$("#desc1").offset();offsets.desc2=$("#desc2").offset();offsets.desc3=$("#desc3").offset();offsets.desc4=$("#desc4").offset();offsets.top={top:0};var d=$(window).scrollTop();var a="";var b=99999;$.each(offsets,function(e,f){var g=Math.abs(offsets[e].top-d);if(g<b){b=g;a=e}});animatedScroll(offsets[a].top)}},350));function animatedScroll(a){$("body").animate({scrollTop:a},200,function(){scrollingOn=false})}(function(){function a(b){if(b<10){return"0"+b}return b}Date.prototype.toWeatherString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z"}}());